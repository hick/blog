<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='zh-CN' xml:lang='zh-CN' xmlns='http://www.w3.org/1999/xhtml'>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
  <title>升级到 Rails 4，你的应用需要准备什么？ - 技术翻译 - 开源中国社区</title>
        <link rel="stylesheet" href="/css/channel.css?date=20130520" type="text/css" media="screen" />
  <link rel="stylesheet" type="text/css" href="/js/2011/fancybox/jquery.fancybox-1.3.4.css" media="screen" />
  <link rel="alternate" type="application/rss+xml" title="最新开源项目" href="http://www.oschina.net/project/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新开源资讯" href="http://www.oschina.net/news/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新问题列表" href="http://www.oschina.net/question/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新翻译列表" href="http://www.oschina.net/translate/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新博客列表" href="http://www.oschina.net/blog/rss" />
  <link rel="alternate" type="application/rss+xml" title="最新代码分享列表" href="http://www.oschina.net/code/rss" />
  <link rel="alternate" type="application/rss+xml" title="开源中国 - 源码列表" href="http://www.oschina.net/code/source_rss" />
  <script type="text/javascript" src="/js/2012/jquery-1.7.1.min.js"></script>
  <script type="text/javascript" src="/js/2012/jquery.form.js"></script>
  <script type="text/javascript" src="/js/2011/fancybox/jquery.fancybox-fixed.js?20130503"></script>
      <script type="text/javascript">
  	g_user = {
	id:0,
	name:'',
	login:false};  </script>
    <script type="text/javascript" src="/js/2011/oschina.js?ver=20121007"></script>
  <script type="text/javascript" src="/js/utils.js"></script>
  <script type="text/javascript" src="/js/channel.js?2013060501"></script>
    </head>
<body>
<div id='OSC_NavTop'>
	<div class="wp998">
        <div id="OSC_Channels">
        	<ul>
        	<li class="item"><a href="http://www.oschina.net/" class='home'>首页</a></li>	<li class="item control_select"><a href="http://www.oschina.net/project" class='project'>开源项目</a>
				<ul class="cs_content">					
                	                	<li><a href="http://www.oschina.net/project/lang/19/java">Java 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/194/csharp">C# 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/22/php">PHP 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/21/c">C/C++ 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/26/ruby">Ruby 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/25/python">Python 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/358/go">Go开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/28/javascript">JS开源软件</a></li>
				</ul>
			</li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/question" class='question'>讨论区</a>				
				<ul class="cs_content">					
                	<li><a href="http://www.oschina.net/question?catalog=1">技术问答 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=2">技术分享 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=3">IT大杂烩 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=100">职业生涯 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=4">站务/建议 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/alipay">支付宝专区 &raquo; </a></li>
                	<li><a href="http://www.oschina.net/hardware">开源硬件专区 &raquo; </a></li>
				</ul>
			</li>
        	<li class="item"><a href="http://www.oschina.net/code/list" class='code'>代码</a></li>
        	        	<li class="item"><a href="http://www.oschina.net/blog" class='blog'>博客</a></li>
        	<li class="item"><a href="http://www.oschina.net/translate" class='tran hl'>翻译</a></li>
            <li class="item"><a href="http://www.oschina.net/news" class='news'>资讯</a></li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/android" class='mobile'>移动开发</a>
				<ul class="cs_content cs_mobile">
                	<li class="android_"><a href="http://www.oschina.net/android">Android开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/home">iOS开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/codingList">iOS代码库</a></li>
                	<li class="wp7_"><a href="http://www.oschina.net/wp7">WP7开发专区</a></li>
				</ul>
			</li>
        	<li class="item t_job"><a href="http://www.oschina.net/job" class='job'>招聘</a></li>
			            <li class="item control_select">
                <a href="http://city.oschina.net/" id="MyCities" title="城市圈">城市圈</a>
							</li>
        	</ul>
        </div>
		<div id="OSC_Userbar">
                		    		当前访客身份：游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fwww.oschina.net%2Ftranslate%2Fget-your-app-ready-for-rails-4">登录</a>| <a href="http://www.oschina.net/home/reg">加入开源中国</a>]
    				</div>
		<div class='clear'></div>
	</div>
</div>
<div id='OSC_Banner'><div class="wp998"><a href='http://www.oschina.net/' class='Logo' title='OSChina 开源中国'>开源中国</a>
<h1><a href="/translate">技术翻译</a></h1>
<dl>
    <dt>已有文章 <em>1048</em>篇</dt>
	<dt>
		当前位置：
            <a href='/translate/list?type=2'>译文列表</a>&nbsp;&raquo;&nbsp;<a href='/translate/list/1?type=2'>Web/WAP应用开发</a>, <a href="" id="deliver">投递原文</a>
    		</dt>	
</dl>
<form action='http://www.oschina.net/search' class='search'>
	<input type='hidden' name='scope' value='translate'/>
	<input id='channel_q' type='text' name='q' value='' placeholder='在 1048 篇翻译的文章中搜索' class='TXT'/>
    <button type='submit' class='BTN'>搜 索</button>
</form>
<script type="text/javascript">
    $(document).ready(function(){
        scrolltotop.offset(100,120);
        scrolltotop.init();
        $('#deliver').click(function(){
            popup("/translate/deliver");
            return false;
        });
    });
</script>
<div class='clear'></div></div></div>
<div id="OSC_Screen">
	<div id="OSC_Content" class='CenterDiv'>
<style type="text/css">
.highlight {color:#A00;padding:0 1px;margin:0 2px;}
.NoData {text-align:center;padding:20px 0;color:#999;}
.error_msg {height:16px;color:#A00; margin:10px 0 10px 0;background:url('/img/warning.gif') no-repeat left center;padding-left:24px;}
.error_msg a {padding:0 5px 0 5px; font-weight:bold;}
.ajax_processing {display:none;background:url('/img/loading.gif') no-repeat left center; padding-left:20px;}
label.SELECTED {color:#C00;}
input.TEXT,textarea.TEXT,input.SEARCH {border:1px solid #bbb;font-size:13px;padding:3px;}
input.BUTTON {height:25px;line-height:25px;padding:0 3px;}
.mb10{margin-bottom:10px;}
a.rndbutton {
    background:#d1c0a5;
    color:#fff;
    text-decoration:none;
    height:30px;
    float:left;
    margin:0;
    border:0px solid #000;
    font-weight:bold;
    font-size:12pt;
    cursor:pointer;
}
a.rndbutton:hover {
    background-color:#bfaa88;
}
a.rndbutton span {
    color:#fff;
    float:left;
    margin:0 0 0 10px;
    padding:0 10px 0 0;
    height:30px;
    line-height:30px;
}

input.rndbutton {
    background:#4E867B;
    color:#fff;
    border:0px solid #000;
    cursor:pointer;
}
input.rndbutton:hover {
    background-color:#4F978A;
}

.SmallPortrait {
    filter:alpha(opacity=90); /* IE */
    -moz-opacity:0.9; /* Moz + FF */
    opacity: 0.9;
    padding:1px;
    background:#fff;
    border:1px solid #ccc;
}
a:hover .SmallPortrait {
    filter:alpha(opacity=100); /* IE */
    -moz-opacity:1.0; /* Moz + FF */
    opacity: 1.0;
    border:1px solid #40AA53;
}

.TextContent p{margin-bottom:5pt;}
.TextContent h1,.TextContent h2,.TextContent h3 {margin-bottom:10pt;border-bottom: 1px solid #CCC;padding-bottom:5px;}

.translate{float:left;width:678px;}
.translate_right{float:right;width:300px;overflow:hidden;}
.translate_right .PopularTags {
    margin: 0 0 10px 0;
    background: white;
    border: 1px solid #eee;
    box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
    -webkit-box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.1);
}
.translate_right .PopularTags p {padding:10px;}

#top_nav{width:100%;font-size:14px;line-height:24px; padding:2px;border-bottom: 1px solid #40AA53;}
#top_nav a{color:#005075;outline:0;text-decoration:none;}
#top_nav .right{float:right;color:#666;}

ul.tabnav {text-align: left;margin: 1em 0 0 0;font-weight: bold;font-size:10pt;border-bottom: medium double #E3E3E3;list-style-type: none;padding: 3px 10px 15px 10px;}
ul.tabnav li {display: inline;margin-left:10px;}
ul.tabnav li.current {border-bottom: 1px solid #fff;background-color: #fff;}
ul.tabnav li.current a {background-color: #0D5178;color: #FFF;cursor:text;}
ul.tabnav li a {padding: 4px 8px 5px 8px;color: #666;margin-right: 0px;text-decoration: none;border-bottom: none;}
ul.tabnav a:hover {background: #FFF;text-decoration:none;}
.header span{margin-left: 10px;font-size:9pt;color:#666;}
.header a.parent{color: #40AA53;}
.header em.child{color: #46B;font-style: normal;}
.header .more .active {color:#A00;}
.remark { margin-top: 8px; font-size:9pt;color: #999999;}
.sta_btn{border: 1px solid #ccc;padding: 2px 5px;float:right;margin-right:10px;-webkit-box-shadow: 0 1px 3px rgba(198, 198, 198, 0.5);box-shadow: 0 1px 3px rgba(198, 198, 198, 0.5);}
.remark a{text-decoration:none;}
.remark em { margin-right: 8px; font-style: normal;}
.remark span {margin-left: 8px; margin-right: 8px;}
.latest{margin:10px 10px 0px 10px; padding-bottom: 10px; border-bottom:1px solid #e3e3e3;_height: 1%;}
.latest dt a{ font-size: 18px; }
.latest .content{font-size: 14px;line-height: 24px; height: auto; overflow: hidden; color: #333;}

.recommendList { margin-bottom: 10px;}
.recommendList a{text-decoration:none;}
.recommendList a:hover{text-decoration:underline;}
.recommendList a.pic img{float:right;width:140px;height:100px;border:0;margin:18px 5px;}
.recommendList ul{margin: 8px 0;}
.recommendList li{float:left;width:300px;margin:0 10px;font-size: 12px;line-height: 30px;color:#3E62A6;overflow: hidden;white-space: nowrap;-o-text-overflow: ellipsis;text-overflow: ellipsis;}
.recommendList li a{font-size: 13px;}
.latest span, .recommendList li span{ color: #999; font-size: 12px;}

.articleList {background: #FFF;padding-bottom: 10px;}
.articleList .article{margin:10px;padding-bottom:10px;border-bottom:medium double #e3e3e3;}
.articleList .article a img{float:right;width:80px;height:60px;border:0;margin:18px 5px;}
.articleList .article dt a{text-decoration:none;font-size: 16px;}
.articleList .article dt a:hover{text-decoration:underline;}
.articleList .article dt a em{font-style: normal;color:#A00;}
.articleList .article .status_0{padding-left:20px;height:20px;line-height:20px;margin-top:8px;font-style: normal;color: #F90;background: url(/img/translate.gif) 0 -30px no-repeat;}
.articleList .article .status_2{padding-left:20px;height:20px;line-height:20px;margin-top:8px;font-style: normal;color: #00BB4B;background: url(/img/translate.gif) 0 0 no-repeat;}
.articleList .article .status_0 em,.articleList .article .status_2 em{font-style: normal;color:#888;margin-left: 10px;}
.articleList .article .sub_title{font-size: 12px;color: #333;margin-top:5px;}
.articleList .article .content{font-size: 13px; line-height: 24px; height: auto; overflow: hidden; color: #333;}
.articleList .pager{margin: 0 10px;}
.articleList .TagDetail {margin:10px 2px;color:#666;border:2px solid #ccc;padding:5px;background:#ffd;font-size:9pt;}
.articleList .TagDetail img.project {float:left; width:48px; height:48px;margin:0 20px 10px 0;}

#categoryMenu {margin-bottom: 10px;background: white;}
#categoryMenu ul{margin: 10px 0;}
#categoryMenu li a {
    display: block;
    text-decoration: none;
    height:36px;
    line-height: 36px;
    font-size: 14px;
    color: #3B3B3B;
    padding: 0 15px;
}
#categoryMenu li a:hover{background: #EEE;color:#080;}
#categoryMenu li a em {
    float: right;
    padding: 0 5px;
    margin-top: 8px;
    height: 20px;
    line-height: 20px;
    background: #EEE;
    font-size: 12px;
    font-style: normal;
    border-radius: 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
}
#categoryMenu li a:hover em{background: #00BC00;color: white;}
#categoryMenu li.current,#categoryMenu li.current a:hover {
    background: #3dae4f;
    background: -moz-linear-gradient(#3dae4f, #0c701c);
    background: -webkit-linear-gradient(#3dae4f, #0c701c);
}
#categoryMenu li.current a{color: white;}
#categoryMenu li.current a em{color: white;background: none;}

.hotList, .TopUsers {
    margin-bottom: 10px;
    background: #FFF;
}
.hotList a{text-decoration:none;}
.hotList a:hover{text-decoration:underline;}
.hotList ul{margin: 10px 0;}
.hotList ul li{height:24px;width:278px;padding:0 10px;overflow: hidden;white-space: nowrap;-o-text-overflow: ellipsis;text-overflow: ellipsis;}
.hotList ul li a{height:24px;line-height:24px;font-size: 10pt;}
.hotList .dot{height: 10px;width: 10px; font-size:0;margin-right:5px;overflow: hidden; zoom: 1; display: inline-block;*display:inline; *zoom:1; }
.hotList .dot1{background-color: #f00;}
.hotList .dot2{background-color: #f90;}
.hotList .dot3{background-color: #aed900;}
.hotList .dot4{background-color: #2bd600;}
.hotList .dot5{background-color: #00bb4b;}
.hotList .dot6{background-color: #01bebe;}
.hotList .dot7{background-color: #035bdf;}
.hotList .dot8{background-color: #2200a8;}
.hotList .dot9{background-color: #510066;}
.hotList .dot10{background-color: #3f0030;}
.TopUsers ul{padding-left: 12px;}
.TopUsers ul li {text-align:center;margin:0 7px 10px 0;float:left;overflow:hidden;font-size:7pt;}
.TopUsers ul{margin-top:10px;}
.TopUsers ul li a {text-decoration:none;}
.TopUsers ul li img {width:64px;height:64px;background:#fff;}
.TopUsers ul li a:hover img {}

a.cmdbutton {background:#5CC26F;color:#fff;text-decoration:none;float:left;margin:0 10px;border:0px solid #000;font-size:16pt;cursor:pointer;}
a.cmdbutton:hover {background-position: left -30px;}
a.cmdbutton span {color:#fff;float:left;margin:6px;padding:0 10px;height:30px;line-height:30px;}

.Article{margin-top:10px;}
.Article .Top{padding:10px;background:#EDEDED;color:#666;}
.Article .Top h1{padding-bottom: 5px;font-size: 28px; line-height: 36px; font-weight: normal;color:#333;}
.Article .Top h1 em.none{font-style: normal;color:#F90;}
.Article .Top h1 em.pending{font-style: normal;color:#00BB4B;}
.Article .Top h3{margin: 2px 0;font-size: 18px;color:#393939;font-weight:normal;}
.Article .Top h3 a{text-decoration:none;}
.Article .Top .Tags a{margin-left:5px;text-decoration: none;}
.Article .Top .Tags a.tag{background: #46A6D2;color: white;padding: 0 5px;}
.Article .Top .Tags a.tag:hover{background-color: #3a7bd2;}
.Article .Top .rec_user{height:22px;line-height:22px;}
.Article .Top .rec_user a{text-decoration:none;}
.Article .Top .rec_user .share a{width: 16px;height: 16px;text-decoration: none;display: inline-block;zoom: 1;vertical-align: middle;margin-left: 5px;}
.Article .Top .rec_user .share .sina{background: url(/img/sina_weibo.png) no-repeat;}
.Article .Top .rec_user .share .tencent{background: url(/img/tencent_weibo.png) no-repeat;}
.Article .Top .rec_user .options{float:right;}
.Article .Top .Vote{float:right;margin-right:20px;padding:5px;background:#005075;color:#FFF;width:54px;text-align:center;display:block;}
.Article .Top .Vote a{font-size:16pt;color:#FFF;display:block;border-top:1px solid #073f59;text-decoration:none;}
.Article .Top .Vote a:hover{color:#ff0;}
.Article .Top .Vote em{font-size:12pt;font-style:normal;padding-bottom:5px;border-bottom:1px solid #04608a;display:block;}
.Article .toolbar {
	overflow:hidden;
    padding: 5px 0 5px 5px;
    color: #6A6A6A;
    border-left: 1px solid #EDEDED;
    border-right: 1px solid #EDEDED;
}
.Article .toolbar a{text-decoration:none;}
.Article .toolbar .label {float:left; width:100px;}
.Article .toolbar em{color:#A3A3A3; font-style: normal;font-size: 12px;}
.Article .toolbar a.t_user{}
.Article .toolbar .options{float:right;width: 250px;text-align: right;padding-right: 5px;}
.Article .toolbar .options a.selected{color:#b90000;font-weight:bold;}
.Article .toolbar .contributers{width:620px;float: left; }
.Article .Tags{line-height:22px;}
.Article .copyright {background:#efe;text-align:left;margin:20px 10px;padding:3px 0 3px 10px;color:#333;font-size:10pt;line-height:22px;border-left:10px solid #CFC;}

.Article .Body{border: 1px solid #EDEDED;}
.Article .Body .paragraph_eng{background:#FFF;padding:10px 0;border: 1px solid #F9F9F9;}
.Article .Body .paragraph_eng .TextContent{width:750px;padding:0 10px;font-size:10pt;line-height:180%;overflow: hidden;}
.Article .Body .paragraph_eng .TextContent span {margin:0 2px;}
.Article .Body .paragraph_eng .translaters{width:210px;padding:0 6px;}
.Article .Body .translate_chs{padding:0;border: 3px solid #F9F9F9;}
.Article .Body .translate_chs .bdt10 {border-top: medium double #E3E3E3;}
.Article .Body .bd10{border:1px solid #A00;}
.Article .Body .paragraph_chs{background:#FFF;padding:10px 0;}
.Article .Body .paragraph_chs .TextContent{width:750px;font-size:10.5pt;padding:0 10px;overflow: hidden;}
.Article .Body .paragraph_chs .translater{width:210px;padding:0 6px;}
.translaters h3{color:#686868;font-size:14px;font-weight:normal;margin:2px 0;}
.translaters ul{margin:10px 0;}
.translaters ul li{text-align:center;margin:0 3px 5px 0px;width:45px;height:48px;float:left;overflow:hidden;font-size:7pt;}
.translaters ul li a {text-decoration:none;}
.translaters ul li img {width:24px;height:24px;border:1px solid #ddd;padding:2px;background:#fff;}
.translaters ul li a:hover img {border:1px solid #40AA53;}
a.TBUTTON{text-decoration:none;background:#4E867B;border:none;color:#FFF;font-size:18px;padding:4px 14px;margin-right:3px;}
a.TBUTTON:hover{background:#4f978a;}
input.TBUTTON{background:#4E867B;border:none;color:#FFF;font-size:18px;padding:4px 14px;margin-right:3px;cursor:pointer;}
input.TBUTTON:hover{background:#4f978a;}

.translater a{text-decoration:none;}
.translater a img{float:left;width:46px;height:46px;border:1px solid #ddd;padding:2px;margin-top:5px;background:#fff;}
.translater .info{float:left;margin:0 10px;width: 126px;height:45px;}
.translater .info h6{font-weight:normal;font-size:10pt;color:#444;}
.translater .info p{color:#666;margin: 5px 0;}
.translater .info p em{color:#A00;margin:0 2px;}
.translater .vote{height:30px;line-height:30px;margin-top:20px;color:#666;}
.translater a.showOthers{padding-left: 20px; background: url(/img/translate.gif) 0 -218px no-repeat; font-size: 10pt;height:30px;line-height:30px;}
.translater a.closeOthers{background: url(/img/translate.gif) 0 -250px no-repeat;}

.EditTop{width:99%;text-align:left;margin:0 auto;}
.Edit .Top{margin-top:10px;padding:10px;background:#EDEDED;color:#666;}
.Edit .Top h1{font-size: 20px; line-height: 26px; font-weight: normal;color:#333;}
.Edit .Top h3{margin: 2px 0;font-size: 14px;color:#393939;font-weight:normal;}
.Edit .Top h3 a{text-decoration:none;}
.Edit .Body{margin-top:10px;padding:10px;background:#EDEDED;}
.Edit .Body .p_content{float:left;width:49%;height:650px;}
.Edit .Body .p_content .title{height:28px;line-height:28px;font-size:12pt;text-align:center;}
.Edit .Body .p_content .title h3{color:#666; font-weight:normal;}
.Edit .Body .p_content .title a {text-decoration:underline;}
.Edit .Body .p_content .title .prev{float:left;}
.Edit .Body .p_content .title .next{float:right;}
.Edit .Body .p_content .TextContent{height:572px;padding:5px;border:1px solid #CCC;overflow-y:auto;overflow-x:hidden;background:#F6F6F6;font-size:10pt;}
.Edit .Body .p_editor{float:right;width:49.5%;height:650px;}
.Edit .Body .p_toolbar{float:left;height: 650px;line-height: 650px;text-align: center;width: 1.3%;}
.Edit .Body .p_toolbar a{text-decoration: none;width:100%;background: #4E867B;color:white;font-size: 8pt;-moz-border-radius: 2px;border-radius: 2px;-webkit-border-radius: 2px;}
.Edit .action{margin-top:20px;float:right;}

.Bottom{margin:20px 0;}
.Bottom .comments{float:left;width:680px;}
.comments h2{font-size: 12pt; border-bottom:medium double #E3E3E3;margin:5px;padding: 0 0 3px 5px;}
.comments h2 span{margin-left:10px;color:#444;font-size:10pt;font-weight:normal;}
.comments h2 em.reply_count{font-style:normal;color:#A00;}
.comments h2 .more{
    float: right;
    font-weight: normal;
    font-size: 10pt;
    color: #666;
}
.comments .comment {margin:5px 0 15px 0;padding:5px 0 5px 5px;border-bottom:1px dashed #ddd;}
.comments .comment .user {float:left; width:40px;margin:0 12px 0 0;font-size:9pt;color:#666;}
.comments .comment .user img {width:32px;height:32px;margin:3px 0 0 0;}
.comments .comment .body {float:left;width:620px;}

.comments .comment .body .time {float:left; width:380px;font-size:9pt;color:#666;}
.comments .comment .body .time a {color:#999;}
.comments .comment .body .time a:hover {background:#666;color:#fff;}
.comments .comment .body .opts {float:right; width:190px;font-size:9pt;text-align:right;}
.comments .comment .body .opts a {color:#999;padding:0 2px;}
.comments .comment .body .opts a:hover {background:#666;color:#fff;}
.comments .comment .body .detail {margin:10px 0;font-size:10.5pt;}
.comments .comment .body .detail div.ref {border:1px solid #ddd;margin:0 0 10px 0;padding:2px;font-size:9pt;background:#ffe;}
.comments .comment .body .detail div.ref h4 {margin:0;padding:1px 3px;background:#CC9966;color:#fff;font-size:9pt;font-weight:normal;}
.comments .comment .body .detail div.ref .ref_body {margin:0;padding:2px;line-height:20px;color:#666;font-size:9pt;}
.comments .comment .body .detail div.ref .ref_body img {display:none;width:0;height:0;}
.comments .pager{margin-left: 60px;}

.commentForm {margin:20px 0 ;}
.commentForm .user {float:left; width:60px;}
.commentForm .user img {width:32px; height:32px; margin:0 0 0 5px;}
.commentForm form {float:left;}
.commentForm form textarea {border:1px solid #999;}
.commentForm form input.SUBMIT {font-size:18px;padding:4px 10px; margin:10px 0;float: right;}

.myList table{margin: 10px;font-size: 10pt;table-layout:fixed;}
.myList table td{vertical-align:top;overflow:hidden;}
.myList a{text-decoration:none;}
.myList .title{}
.myList .title a{text-decoration:none;color:#46B;}
.myList .title span{font-size:9pt;color:#999;}
.myList .vote{width:50px;font-size:9pt;color:#999;}
.myList .date{width:70px;font-size:9pt;color:#999;}
.myList .opts{width:100px;text-align:right;color:#999;}
.myList .pager{margin: 0 10px 10px 10px;}

.cmptable{table-layout:fixed;background:#EDEDED;}
.cmptable td.eng{background-color:#FFFFFF;padding:5px;overflow:hidden;font-size:10pt;line-height:1.5;}
.cmptable td.chs{background-color:#FFFFFF;padding:5px;overflow: hidden;font-size:10.5pt;line-height:1.5;}
.cmptable td p {margin:10px 0;}
.cmptable td .infoicon{
    float:right;
    background: #EBEBEB;
    height: 20px;
    padding: 0 6px;
    line-height: 20px;
    z-index: 999;
    text-align: center;
    font-size: 11px;
    color: #060;
    border-radius: 3px;
    cursor:pointer;
}
.cmptable td .infoicon img {
    margin-left: 5px;
    vertical-align: middle;
    padding-top: 2px;
}
.cmptable td .infocard{
    position:absolute;
    top:30px;
    right:0px;
    padding:5px 10px;
    font-size: 10pt;
    border-radius: 8px;
    z-index:100;
    background:#EDEDED;
    display:none;
}
.cmptable td .infocard h1{height:20px;line-height:20px;font-size:15px;color:#666;margin-bottom:5px;border-bottom:1px dotted #CCC;}
.cmptable td .infocard h1 a.close {float:right;font-size:6pt;}
.cmptable td .infocard h1 a.close img{width:15px;height:15px;}
.cmptable td .infocard a {text-decoration:none;}
.cmptable td .infocard a img{float:left;width:50px;height:50px;}
.cmptable td .infocard .text{float:left;margin-left:10px;}
.cmptable td .infocard h6{font-weight:normal;font-size:10pt;color:#444;}
.cmptable td .infocard p{color:#666;margin: 0;padding: 0;}
.cmptable td .infocard p em{color:#A00;margin:0 2px;}
.cmptable td  ol{list-style-type:decimal;margin: 0.5em 0 0.5em 1.5em;line-height:1.5em;}
.cmptable td  ul{list-style-type:disc;margin: 0.5em 0 0.5em 1.5em;line-height:1.5em;}

.QuestionHeader {
    height:34px;
    border-bottom:1px solid #40AA53;
    margin:0 0 15px 0;
}
.QuestionHeader #portrait {float:left;width:35px;}
.QuestionHeader #portrait img {width:24px;height:24px;}
.QuestionHeader #switcher {
    float:left;
    margin:5px 0 0 2px;
}
.QuestionHeader #switcher h1 {font-size:12pt;float:left;color:#666;}
.QuestionHeader #switcher h1 a {text-decoration:none;}
.QuestionHeader #switcher h1 em {font-style:normal;color:#40AA53;}

.QATip {margin:40px 0 50px 100px;}
.QATip h1 {font-size:13.5pt;}
.QATip h1 em {color:#A00;font-style:normal;}
.QATip .text {margin:20px 0 20px 20px;font-size: 11pt;}
.QATip .text p.hint{color: #A00;font-size: 10pt;margin-top: 10px;}
.QATip .text ul {margin:10px 0 0 0;list-style-type:disc;list-style-position: inside;line-height:24px;}
.QATip .btn_view {margin-left:20px;}

.AllTags{padding-bottom: 10px;}
.AllTags ul.tagList {margin:10px;}
.AllTags ul.tagList li {float:left; width:24%;}
.AllTags ul.tagList li .stat {color:#666;font-size:8pt;-webkit-text-size-adjust:none;}
.AllTags a.tag,.PopularTags a.tag {
    background-color: #E0EAF1;
    border-bottom: 1px solid #3E6D8E;
    border-right: 1px solid #7F9FB6;
    color: #3E6D8E;
    font-size: 8pt;
    -webkit-text-size-adjust:none;
    line-height: 2.4;
    margin: 2px 2px 2px 0;
    padding: 2px 4px;
    text-decoration: none;
    white-space: nowrap;
}
.AllTags a.tag em,.PopularTags a.tag em {font-style:normal;color:#666;font-size:7pt; margin-left:2px;}
.AllTags a.tag:hover,.PopularTags a.tag:hover {background-color:#3E6D8E;color:#fff;}
.AllTags a.tag:hover em,.PopularTags a.tag:hover em {color:#fff;}
.AllTags .pager {margin: 0 10px;}</style>
<div class='Article'>
	<div class='Top'>
		<div class='Vote'><em id='vote_count'>10</em><a href='javascript:vote_article(361);'>顶</a></div>
		<h1>
            升级到 Rails 4，你的应用需要准备什么？
                    </h1>
		<h3>英文原文：<a href='http://rubysource.com/get-your-app-ready-for-rails-4/' target='_blank'>Get Your App Ready for Rails 4</a></h3>
        <div class='Tags'>
		<strong>标签：</strong>
						<a href='http://www.oschina.net/translate/tag/ruby+on+rails' class='tag project' title='开源网络应用框架 Rails'>Rails</a>		        		</div>
		<div class='rec_user'>
            <span class="options">
                                <style>
#TagsSwitcher{color:#A00;}
#RecTags,#MyTags{margin:5px 0;}
#RecTags a.tag{line-height:24px;}
#favor_form p:first-child{margin:5px 0;}
#favor_form{width:200px;}
#favor_form p {color:#666;}
#favor_form form{min-height: 85px;width:200px;}
#favor_form form ._favor_input{display:block;margin:2px 0;width:199px;}
#favor_form form ._favor_button{float:left;padding:2px 5px;}
.favor_ok {text-align:center;font-size:10.5pt;width:199px;height:60px;margin-top:10px;}
#TagsSwitcher{cursor:pointer;float:right;margin-top:10px;}
#MyTags{display:none;width:199px;}
#MyTags a.tag {float:left; background-color: #E0EAF1;border-bottom: 1px solid #3E6D8E;border-right: 1px solid #7F9FB6;color: #3E6D8E;font-size: 8pt;line-height: 16px;margin: 2px 2px 2px 0;padding: 2px 4px;text-decoration: none;white-space: nowrap;}
#MyTags a.tag:hover{background-color: #3E6D8E;color: #FFF;}
</style>
<script type='text/javascript'>
var favor_add = "<a href='javascript:add_to_favor(361,7)' id='favor_trigger' title='添加到收藏夹'>我要收藏</a>";
var favor_del = "<a href='javascript:delete_favor(361,7)' id='favor_trigger' style='color:#a00;'>取消收藏</a>";
var favor_ok = "<p class='favor_ok'>已成功添加到收藏夹<br/><br/><a href='null/favorites?type=7'>我的收藏夹</a>| <a href='javascript:close_favor()'>关闭</a></p>";
function delete_favor(obi_id, obj_type){
	$('#attention_it').html(favor_add);
	$("#p_attention_count").load("/action/favorite/cancel?type="+obj_type+"&id="+obi_id, {user: ''});
}
function add_to_favor(obj_id, obj_type){
	if(confirm('必须登录后才能收藏，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+encodeURIComponent(location.href);
	}
}
function close_favor(elem_id){
    $('#favor_trigger').poshytip('destroy');
}
function setTag(tv){
	var t = $("._favor_input");
	var value = t.val();
	var tags = value.replace(/，/ig,',').split(',');
	var exist = false;
	value = $.map(tags,function(v,i){
		if($.trim(tv) == $.trim(v)){
			exist = true;
			return undefined;
		}
		return v;
	}).join(',');
	if(exist){
		t.val(value);
		return;
	}
	if(value!="")
		t.val(value+","+tv);
	else
		t.val(tv)
}
function ltrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(0)) != -1){
        var j=0, i = s.length;
        while (j < i && whitespace.indexOf(s.charAt(j)) != -1){
            j++;
        }
        s = s.substring(j, i);
    }
    return s;
}

function rtrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(s.length-1)) != -1){
        var i = s.length - 1;
        while (i >= 0 && whitespace.indexOf(s.charAt(i)) != -1){
            i--;
        }
        s = s.substring(0, i+1);
    }
    return s;
}
 
function trim(str){
    return rtrim(ltrim(str));
}
</script>
<em id='p_attention_count'>21</em>人收藏此文章,
<span id='attention_it'>
	<script type='text/javascript'>document.write(favor_add);</script>
</span></span>
			<a href='http://my.oschina.net/osadmin' target='_blank'>oschina</a>推荐于 7个月前 (共 26 段, 翻译完成于 01-06) (<a href='#comments'>7评</a>)
            <span class="share">
                                <a class="sina" title="分享到新浪微博"  href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=858381728',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&source=',e(r),'&sourceUrl=',e(l),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','','升级到 Rails 4，你的应用需要准备什么？ - 技术翻译: 一个新的 Rails 版本即将发布了，随之带来了很多的修改、依赖和新特性。 让我们看一下，要使用 Rails 4，你需要为你的应用准备些什么。','','utf-8'));"></a><a class="tencent" title="分享到腾讯微博"  href="javascript:(function(){window.open('http://v.t.qq.com/share/share.php?url='+encodeURIComponent(document.location)+'&amp;appkey=96f54f97c4de46e393c4835a266207f4&amp;site=&amp;title='+encodeURIComponent(document.title)+encodeURIComponent(': 一个新的 Rails 版本即将发布了，随之带来了很多的修改、依赖和新特性。 让我们看一下，要使用 Rails 4，你需要为你的应用准备些什么。'),'', 'width=450, height=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no');}())"></a>
            </span>
		</div>
		<div class='clear'></div>
	</div>
	<div class='toolbar'>
				<span class='label'>参与翻译<em>(5人)</em>：</span>
        <div class="contributers"><a href='http://my.oschina.net/javayou' target='_blank' class='t_user'>红薯</a>, <a href='http://my.oschina.net/tomlin' target='_blank' class='t_user'>Tom-Lin</a>, <a href='http://my.oschina.net/u/156705' target='_blank' class='t_user'>刘劲</a>, <a href='http://my.oschina.net/aiasfina' target='_blank' class='t_user'>aiasfina</a>, <a href='http://my.oschina.net/onionbomb' target='_blank' class='t_user'>OnionBomb</a></div>		
				<div class='options'>
                    <a href='http://www.oschina.net/translate/get-your-app-ready-for-rails-4' class='selected'>仅中文</a>| <a href='http://www.oschina.net/translate/get-your-app-ready-for-rails-4?cmp' target="_blank">中英文对照</a>| <a href='http://www.oschina.net/translate/get-your-app-ready-for-rails-4?lang=eng'>仅英文</a>| <a href="?print" target="_blank">打印此文章</a>
                </div>
	</div>
	<div class='Body'>
		                    <div id='translate_4238' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p>一个新的 Rails 版本即将发布了，随之带来了很多的修改、依赖和新特性。 </p>
<p>让我们看一下，要使用 Rails 4，你需要为你的应用准备些什么。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/tomlin' title='Tom-Lin' target='_blank'><img src="http://static.oschina.net/uploads/user/77/155761_50.jpg?t=1369134037000" align="absmiddle" alt="Tom-Lin" title="Tom-Lin" class="SmallPortrait" user="155761"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/tomlin' target='_blank'>Tom-Lin</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4266'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4266);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4239' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h2>升级的方式 </h2>
<p>要为 Rails 4 做好准备最简单的方法就是让你的应用运行在 Rails 3.2 上。如果你目前还不是使用 Rails 3.2，建议使用小版本方式升级，就是说从 3.0 升级到 3.1 ，然后再从 3.1 升级到 3.2 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4267'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4267);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4240' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h2>废弃 Deprecations </h2>
<p>一些方法将在 Rails 4 中被完全删除，我们应该知道这些，并事先做好准备。 </p>
<h3>Rails 4 只支持 Ruby 1.9.3+<br /></h3>
<p>Rails 4 将只支持 Ruby 1.9.3 或者更新的版本，因此必须确保你的应用可在 Ruby 1.9.3 版本上运行。 </p>
<p>如果你使用的是 Ruby 1.9.x，这样升级会更加直接。 </p>
<p>如果你还在使用 Ruby 1.8.7，那需要做多点工作。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4268'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4268);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4241' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p>现在大多数 gems 都可以运行在 Ruby 1.9 版本，或者也有了替代品。例如 <a href="https://rvm.io/" rel="nofollow">rvm</a>或 <a href="https://github.com/sstephenson/rbenv" rel="nofollow">rbenv</a>这样的工具可以帮助我们的应用程序运行在多个 Ruby 的版本。 </p>
<p>在你的 Gemfil 中使用条件语句可以方便的处理不同环境下的不同 gems，直到你完全移植到 Ruby 1.9.x 上。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4269'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4269);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4242' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p>例如： </p>
<pre class="brush: ruby; title: ; notranslate">gem 'ruby18-only-gem', :platforms =&gt; :ruby_18
gem 'ruby19-only-gem', :platforms =&gt; :ruby_19
#More on this can be seen in the Bundler manpages:
#http://gembundler.com/man/gemfile.5.html#PLATFORMS-platforms-
</pre>
<p>关于 1.8 和 1.9 之间的改变可看 Peter Cooper 写的这篇文章 <a href="https://cooperpress.com/19walkthrough" rel="nofollow">the Ruby 1.9 walkthrough</a>. 强烈推荐！ </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4270'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4270);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4243' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3>不再有 vendor/plugins </h3>
<p>Rails 4 将删除 Rails::Plugins 类，所以将不会再加载 vender/plugins 目录下的任何代码。 </p>
<p>大多数应用应该依赖于 gems 而不是插件。但如果你在 vender/plugins 中还有一些代码，你有两种选择： </p>
<ul>
 <li>改用 gem 方式实现，多数插件已经有了 gem 版本，如果没有你可以在 Gemfile 中通过 :gitor:pathoptions 来引用插件 </li>
 <li>移到 lib/your\_pluginand ，然后在 onconfig/initializers 初始化<br /></li>
</ul>
<p>这里是关于废弃插件的说明 <a href="https://github.com/rails/rails/commit/dad7fdc5734a3813246f238ac5760b2076932216" rel="nofollow">commit</a></p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4271'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4271);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4244' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3>路由匹配 </h3>
<p>关于路由，匹配方法不再作为是 catch-all 选项，你可以指定需要响应什么 HTTP 方法，包括 GET/POST 之类的。 </p>
<pre class="brush: ruby; title: ; notranslate">#Rails 3.2
match &quot;/users/:id&quot; =&gt; &quot;users#show&quot;
</pre>
<pre class="brush: ruby; title: ; notranslate">#Rails 4.0
match &quot;/users/:id&quot; =&gt; &quot;users#show&quot;, via: :get
#or specify multiple verbs
match &quot;/users&quot; =&gt; &quot;users#index&quot;, via: [:get, :post]
</pre>
<p>另外一个更好兼容 Rails 3.2 的方法是显式的指定 HTTP 方法，是 GET 或者 POST，或者是其他的方法。这样你就可以兼容现在的版本和 Rails 4.0. </p>
<pre class="brush: ruby; title: ; notranslate">#Rails 3.2 and 4.0 compatible
get &quot;/users/:id&quot; =&gt; &quot;users#show&quot;
# multiple verbs
get &quot;/users&quot; =&gt; &quot;users#index&quot;
post &quot;/users&quot; =&gt; &quot;users#index&quot;
</pre>
<h3></h3></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4274'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4274);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4245' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3>ActiveRecord<br /></h3>
<p>ActiveRecord 范围需要一个 Callable 对象。 </p>
<p>在 Rails 4 中，所有 ActiveRecord 范围必须使用一个 callable 对象来定义： </p>
<pre class="brush: ruby; title: ; notranslate">#Rails 3.2
scope :recent, where(created_at: Time.now - 2.weeks)
</pre>
<pre class="brush: ruby; title: ; notranslate">#Rails 4
scope :recent, -&gt; { where(&quot;created_at &gt; ?&quot;, Time.now - 2.weeks).order(&quot;created_at desc&quot;) }
scope :active, -&gt; { where(status: 'active') }
</pre>
<p>这个可避免一些关于日期和时间对象的微小 bug，无需动态的评估。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4275'>1</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4275);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4246' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3>被移除的代码 </h3>
<p>在 Rails 4 中有很多代码会被删除，别担心，因为大多数被删除的代码还会作为独立的 gems 存在，这样有助于更平滑的迁移。 </p>
<p>被删除的代码包括： </p>
<ul>
 <li><a href="https://github.com/rails/activeresource" rel="nofollow">ActiveResource</a>(这里有篇文章 <a href="http://yetimedia.tumblr.com/post/35233051627/activeresource-is-dead-long-live-activeresource" rel="nofollow">blogpost</a>解释了这个改动) </li>
 <li><a href="https://github.com/rails/rails-observers" rel="nofollow">ActiveRecord Observers and ActionController Sweepers</a></li>
 <li><a href="https://github.com/rails/activerecord-session_store" rel="nofollow">ActiveRecord::SessionStore</a></li>
 <li><a href="https://github.com/rails/protected_attributes" rel="nofollow">ActiveModel Mass Assignment Sanitizer</a></li>
 <li><a href="https://github.com/rails/actionpack-action_caching" rel="nofollow">Action Caching</a></li>
 <li><a href="https://github.com/rails/actionpack-page_caching" rel="nofollow">Page Caching</a></li>
 <li><a href="https://github.com/rails/activerecord-deprecated_finders" rel="nofollow">Hash-based and dynamic finders</a></li>
</ul>
<p><br /></p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4276'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4276);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4247' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p><strong>特别<strong>值得一提的</strong>注意事项:</strong></p>
<p>Activerecord-deprecated-finders 是 Rails 4.0 中默认提供废弃功能的依赖包，但它也将在 4.1 版本中被删除。因此你需要密切关注所有的警告信息，并开始修复这些警告。 </p>
<p><a href="http://edgeguides.rubyonrails.org/4_0_release_notes.html#active-record-deprecations" rel="nofollow">Rails 指南</a>提供一个很有用的解释，关于在大多数情况下如何修改动态查找器： </p>
<blockquote>
 <p>所有动态的方法除了 find<em>by</em>… 和 find<em>by</em>…! 外都已废弃，你可以使用如下的替代方法： </p>
 <ul>
  <li>find_all_by_...改为 where(...). </li>
  <li>find_last_by_...改为 where(...).last. </li>
  <li>scoped_by_...改为 where(...). </li>
  <li>find_or_initialize_by_...改为 where(...).first_or_initialize. </li>
  <li>find_or_create_by_...改为 find_or_create_by(...) 或者 where(...).first_or_create. </li>
  <li>find_or_create_by_...!改为 find_or_create_by!(...) 或者 where(...).first_or_create!. </li>
 </ul>
</blockquote>
<p>所有的那些 gems 都可以帮你实现平滑的迁移。我的建议是：对一个完全的 Rails 4 环境，通过警告信息来帮你的代码适应于最新版本的语法。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4293'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4293);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4248' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h2>新特性 </h2>
<p>现在该是介绍最有趣的部分了！ </p>
<p>Rails 4 增加了大量的新特性，好消息是这些新特性都可以在 Rails 3.2 中通过 gems 方式获取。同时 Rails 4 也提供了预览版不可方便进行升级测试。 </p>
<p>下面我们来看看这些新特性。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4277'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4277);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4249' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3>强参数 (<a href="https://github.com/rails/strong_parameters" rel="nofollow">gem</a>)<br /></h3>
<p>在围绕着 mass-assignment保护 产生了不少争议之后，我们对各种不同的方法进行<br />探讨。<br /><br />Rails 3.2 的做法是在模型中使用 attr_accessible 和 attr_protected 方法。<br /><br />Rails 4 则需要从完全不同的角度来看，为模型分配参数的工作将由控制器负责。 </p>
<pre class="brush: ruby; title: ; notranslate">#Rails 3.2
class User &lt; ActiveRecord::Base
  attr_protected :name, :email
end
class UsersController &lt; ApplicationController
  def create
    @user = User.new params[:user]
    if @user.save
      redirect_to @user
    else
      render :new
    end
  end
end
</pre>
<pre class="brush: ruby; title: ; notranslate">#Rails 4.0
class User &lt; ActiveRecord::Base
  include ActiveModel::ForbiddenAttributesProtection
end
class UsersController &lt; ApplicationController
  def create
    @user = User.new params.require(:user).permit(:name, :email)
    if @user.save
      redirect_to @user
    else
      render :new
    end
  end
end
</pre>
<p>也可以简化成类似的 </p>
<pre class="brush: ruby; title: ; notranslate">#Rails 4
class UsersController &lt; ApplicationController
  def create
    @user = User.new user_params
    #  ...
  end
  private
  def user_params
    params.require(:user).permit(:name, :email)
  end
end
</pre></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/aiasfina' title='aiasfina' target='_blank'><img src="http://static.oschina.net/uploads/user/92/184649_50.jpg?t=1347091687000" align="absmiddle" alt="aiasfina" title="aiasfina" class="SmallPortrait" user="184649"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/aiasfina' target='_blank'>aiasfina</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4454'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4454);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4250' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p>这种方法的好处是，我们可以在一个面向用户的方法里面过滤不同的参数，而不是在一个拥有管理权限的地方过滤。 </p>
<p>还有一个好处，不同的方法可以允许不同组的属性。让控制器来控制模型应该接受什么是明智的选择。 </p>
<p>在使用这个gem的时候还要记住一点，你需要添加一行代码到 config/application.rb: </p>
<pre class="brush:ruby; toolbar: true; auto-links: false;">config.active_record.whitelist_attributes = false</pre>
<span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:12px;line-height:normal;">这个&nbsp;</span>
<a href="https://github.com/rails/strong_parameters" rel="nofollow"><span style="background-color:;">gem</span></a>
<span style="font-family:微软雅黑, Verdana, sans-serif, 宋体;font-size:12px;line-height:normal;">&nbsp;还提供了一个清晰的 README，非常值得一读。Railser的福气啊，想知道更多的话还有一个&nbsp;</span>
<span style="background-color:;"><a href="http://railscasts.com/episodes/371-strong-parameters" rel="nofollow">Railscast</a>&nbsp;视频介绍。</span></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/u/156705' title='刘劲' target='_blank'><img src="http://static.oschina.net/uploads/user/78/156705_50.jpg" align="absmiddle" alt="刘劲" title="刘劲" class="SmallPortrait" user="156705"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/u/156705' target='_blank'>刘劲</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4455'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4455);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4251' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3>Cache 摘要和和 Russian Doll Caching (<a href="https://github.com/rails/cache_digests" rel="nofollow">gem</a>) </h3>
<p>在 Rails 4 中 action 和页面缓存被移除了，同时也引入了一种新的方式来存储缓存，那就是 <a href="http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works" rel="nofollow">基于键的失效期</a>. </p>
<p>主思路就是增加 updated\_at 属性到缓存键，当记录更改时，缓存键也跟着更改，这样就可以获取新的数据。 </p>
<p>这个方法导致了大量的缓存垃圾，因此更适合使用类似 memcached 同类的存储，因为当空间用完时会自动清除最老的数据。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4506'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4506);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4252' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p>同时，对于视图而言，它生成文件的 MD5 checksum 并存做缓存的键，如果文件做任何改动，缓存的键也跟着更改，这样就可以重新加载文件内容。 </p>
<pre class="brush: ruby; title: ; notranslate">#Rails 3.2
&lt;% cache ['v1', @user] do %&gt;
...
&lt;% end %&gt;
</pre>
<pre class="brush: ruby; title: ; notranslate">#Rails 4.0
&lt;% cache @user do %&gt;
...
&lt;% end %&gt;
#this will generate a key like
# views/users/1-201222172130/1a79a4d60de6718e8e5b326e338ae533
</pre>
<p>在嵌套视图中也可以使用，它能识别是嵌套视图的情况。这里有一个相关的 <a href="http://railscasts.com/episodes/387-cache-digests" rel="nofollow">Railscast</a></p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4488'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4488);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4253' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3>声明式 ETags (<a href="https://github.com/rails/etagger" rel="nofollow">gem</a>) </h3>
<p>在 Rails 4 中你将可以设置控制器范围的 ETag 后缀。当一个 action 依赖于多个记录或者是登录用户时很有用。 </p>
<p>这真的是一个非常简单的方法用以获取更好的HTTP缓存。 </p>
<p>一个简单的例子： </p>
<pre class="brush: ruby; title: ; notranslate">class TodosController &lt; ApplicationController
  etag { current_user.try :id }
  etag { @todo_list }
  before_fiter :find_todo_list
  def show
    @todo = @todo_list.todos.find(params[:id])
    fresh_when(@todo)
  end
  private
  def find_todo_list
    @todo_list = TodoList.find(params[:todo_list_id])
  end
end
</pre>
<p>在这个例子中，第一个 etag 块检查当前用户，确保不会出现两个不同的用户使用相同的缓存 ETag。第二个使用 TotoList 对象作为 ETag 的一部分，因此修改了 todo list 就会同时修改 ETag。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4486'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4486);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4254' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3>Turbolinks (<a href="https://github.com/rails/turbolinks" rel="nofollow">gem</a>) </h3>
<p>Turbolinks 类似 <a href="https://github.com/defunkt/jquery-pjax" rel="nofollow">pjax</a>的兄弟，它使用 pushState，触发一个 XHR 请求，然后替换 &lt;body&gt; 内容。有三个优点： </p>
<ul>
 <li>无<span></span>需多次下载 CSS/JS </li>
 <li>无需重新编译 </li>
 <li>不用重新评估 </li>
</ul>
<p><br /></p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4504'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4504);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4255' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'>Rails 4 默认启用 Turbolinks。但如果你使用太多 dom ready 事件的话可能会带来一些问题。TurboLinks 声明了 4 个新的事件： 
<ul>
 <li>page:fetchstarting 用于获取目标页面 (只有刷新时调用，缓存时不调用). </li>
 <li>page:loadfetched 当从服务器中获取完页面时调用 </li>
 <li>page:restorefetched 当从客户端缓存中获取页面时调用 </li>
 <li>page:changepage 页面更改为最新获取的版本 </li>
</ul>
<p><br /></p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4505'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4505);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4256' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p>你必须检查你的 JavaScript 代码，并在需要的时候修复它。 </p>
<p>想现在使用，只需安装那个 gem 然后在你的主 JavaScript 文件(通常是 application.js)中添加 //= require turbolinks </p>
<p>关于这个特性，这里有一篇很好的 <a target="_blank" href="http://railscasts.com/episodes/390-turbolinks" rel="nofollow">Railscast</a></p>
<h3>Concerns </h3>
<p>Rails 4 引入了新的默认模式用于避免代码重复。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4503'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4503);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4257' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;"  rowspan="2"><div class='TextContent'><h4><strong>Routing Concerns (<a href="https://github.com/rails/routing_concerns" rel="nofollow">gem</a>)</strong></h4>
<p>当多个resources或methods被几个routes共享时, 会产生大量重复代码. 这个功能在routes上给了我们一个新的concern定义, 来提高可读性以及使代码更DRY. </p>
<pre class="brush: ruby; title: ; notranslate">#Rails 3.2
resources :messages  do
  resources :comments
  post :trash, :restore, on: :member
end
resources :documents do
  resources :comments
  post :trash, :restore, on: :member
end
</pre>
<pre class="brush: ruby; title: ; notranslate">#Rails 4
concern :commentable do
  resources :comments
end
concern :trashable do
  post :trash, :restore, on: :member
end
resources :messages, :documents, concerns: [:commentable, :trashable]
</pre>
<p>这功能可以在Rails 3.2中通过加装<a href="https://github.com/rails/routing_concerns" rel="nofollow">routing_concerns</a>gem来使用. </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/onionbomb' title='OnionBomb' target='_blank'><img src="http://static.oschina.net/uploads/user/296/592551_50.jpg?t=1342875305000" align="absmiddle" alt="OnionBomb" title="OnionBomb" class="SmallPortrait" user="592551"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/onionbomb' target='_blank'>OnionBomb</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4497'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4497);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
        <tr>
        <td class="translater" valign="bottom">
                        <a id='btn_show_other_4257' class="showOthers" href='javascript:show_other(4257,4497);'>其它翻译版本(1)</a>
        </td>
    </tr>
    </table>
<div id='other_translate_4257' style='display:none;'>
	<div style='text-align:center;margin:10px 0;'><img src='/img/loading.gif' alt='loading...' /><strong>正在加载...</strong></div>
</div>
</div>
        		                    <div id='translate_4258' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p><strong>Models 和 Controller 关注</strong></p>
<p><strong></strong>Rails 4 默认增加两个新的文件夹：path:app/controllers/concerns 和 app/models/concerns . </p>
<p>DHH 上有篇 <a href="http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns" rel="nofollow">文章</a>解释了这个思路。 </p>
<p>一般代码是存在于 lib 目录，这些新的目录让事情看起来更加简洁和容易查找。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4302'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4302);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4259' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p><span>要完成这点修改，你仅需简单的把下面这行代码添加到</span>&nbsp;yourconfig/application.rb </p>
<pre class="brush: ruby; title: ; notranslate">config.autoload_paths += Dir[&quot;#{config.root}/app/controllers/concerns&quot;, &quot;#{config.root}/app/models/concerns&quot;]
</pre>
<p>然后再把你的 model 和 controller 等这些模块移到这些目录中。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/tomlin' title='Tom-Lin' target='_blank'><img src="http://static.oschina.net/uploads/user/77/155761_50.jpg?t=1369134037000" align="absmiddle" alt="Tom-Lin" title="Tom-Lin" class="SmallPortrait" user="155761"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/tomlin' target='_blank'>Tom-Lin</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4300'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4300);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4260' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h3>Dalli 成为了 memcache 客户端(<a href="https://github.com/mperham/dalli" rel="nofollow">gem</a>) </h3>
<p><a href="https://github.com/mperham/dalli" rel="nofollow">Dalli</a>&nbsp;将替换掉掉 memcache-client 而成为 gem 的默认缓存客户端。 </p>
<p>这将带来以下几点改进： </p>
<ul>
 <li>这将比 <span>memcache-client 快了将近</span>&nbsp;20%. </li>
 <li>可以处理故障转移和恢复，并能调节超时设置。 </li>
 <li>这是线程安全的 </li>
 <li>使用了更新的 <span>memcached 二进制协议</span>。 </li>
</ul>
<p><br /></p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/tomlin' title='Tom-Lin' target='_blank'><img src="http://static.oschina.net/uploads/user/77/155761_50.jpg?t=1369134037000" align="absmiddle" alt="Tom-Lin" title="Tom-Lin" class="SmallPortrait" user="155761"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/tomlin' target='_blank'>Tom-Lin</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4299'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4299);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4261' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><p>现在要在你的应用中测试这项改动，你仅需简单地做以下两点： </p>
<p>在你的 Gemfile 里: </p>
<pre>gem 'dalli'</pre>
<p>Inconfig/environments/production.rb(或者是你使用的<span>memcached环境</span>): </p>
<pre class="brush: ruby; title: ; notranslate">config.cache_store = :dalli_store
# just be sure to change this back to :mem_cache_store when upgrading to Rails 4
</pre>
<p>要注意一件事：Dalli 依赖于 memcached 1.4+，因此如果你使用了旧的 memcached 版本，那么你也要先升级你的 memcached！ </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/tomlin' title='Tom-Lin' target='_blank'><img src="http://static.oschina.net/uploads/user/77/155761_50.jpg?t=1369134037000" align="absmiddle" alt="Tom-Lin" title="Tom-Lin" class="SmallPortrait" user="155761"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/tomlin' target='_blank'>Tom-Lin</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4298'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4298);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        		                    <div id='translate_4262' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;"  rowspan="2"><div class='TextContent'><h3>默认启用线程安全 </h3>
<p>在新的 Rails 应用中，产品模式下默认启用线程安全选项，你可设置 config.cache_classes 和 config.eager_loader 值为 false 来关闭它。 </p>
<p>这里应该不会有太多问题，除非应用过分的依赖于线程安全。 </p>
<p>这里有一篇 Aaron Patterson 写的博客解释了这个改变：<a href="http://tenderlovemaking.com/2012/06/18/removing-config-threadsafe.html" rel="nofollow">config.threadsafe!: What does it do?</a></p>
<p>你现在就可以在应用中启用 threadsafe! 选项来查看具体表现。当升级到 Rails 4 后你就会看到一个警告，你可以移除这个配置行。 </p></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/javayou' title='红薯' target='_blank'><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/javayou' target='_blank'>红薯</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4301'>2</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4301);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
        <tr>
        <td class="translater" valign="bottom">
                        <a id='btn_show_other_4262' class="showOthers" href='javascript:show_other(4262,4301);'>其它翻译版本(1)</a>
        </td>
    </tr>
    </table>
<div id='other_translate_4262' style='display:none;'>
	<div style='text-align:center;margin:10px 0;'><img src='/img/loading.gif' alt='loading...' /><strong>正在加载...</strong></div>
</div>
</div>
        		                    <div id='translate_4263' class='translate_chs'>
<table class='paragraph_chs'>
    <tr>
        <td style="border-right:1px solid #E3E3E3;" ><div class='TextContent'><h2>总结 </h2>
<p><span>本文把</span>即将发布的 Rails 4 的主要更新内容都包含了。在这些更新中，大多数应用都能够轻易地升级到 Rails 4。但不管怎么说，Rails 4 还在积极的开发中，因此，将来还会有一些其他的更新。我将会持续关注并不断更新本文。 </p>
<p>进一步阅读： </p>
<ul>
 <li><a href="http://blog.remarkablelabs.com/2012/11/rails-4-countdown-to-2013" rel="nofollow">Rails 4 Countdown to 2013</a></li>
 <li><a href="https://speakerdeck.com/spastorino/rails-4-in-30" rel="nofollow">Rails 4 in 30 minutes</a></li>
 <li><a href="http://edgeguides.rubyonrails.org/4_0_release_notes.html" rel="nofollow">Ruby on Rails 4.0 Release Notes</a># Get your app ready for Rails 4! </li>
</ul></div></td>
        <td class='translater' valign="top">
                        <a href='http://my.oschina.net/tomlin' title='Tom-Lin' target='_blank'><img src="http://static.oschina.net/uploads/user/77/155761_50.jpg?t=1369134037000" align="absmiddle" alt="Tom-Lin" title="Tom-Lin" class="SmallPortrait" user="155761"/></a>
            <div class='info'>
                <h6><a href='http://my.oschina.net/tomlin' target='_blank'>Tom-Lin</a><br/>翻译于 7个月前</h6>
                <p><em id='vote_count_4297'>0</em>人顶</p>
            </div>
            <div class='clear'></div>
            <p class='vote'>
            <a href='javascript:vote_block(4297);' class='rndbutton'><span>顶</span></a>&nbsp;翻译的不错哦!
                        </p>
        </td>
    </tr>
    </table>
</div>
        				<div class="copyright">
			本文中的所有译文仅用于学习和交流目的，转载请务必注明文章译者、出处、和本文链接<br/>
			我们的翻译工作遵照 <a href='http://zh.wikipedia.org/wiki/Wikipedia:CC' target='_blank'>CC 协议</a>，如果我们的工作有侵犯到您的权益，请及时联系我们
		</div>
	</div>
	<div class='Bottom'>
		<div class='google_ads' style='float:right;width:300px;'>
			<script type="text/javascript"><!--
            google_ad_client = "ca-pub-7090564139599510";
            /* translate-comments */
            google_ad_slot = "8977750911";
            google_ad_width = 300;
            google_ad_height = 250;
            //-->
            </script>
            <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
		</div>
        <script>
			$(function(){
				$(window).scroll(function() {
					var $offset = $('.google_ads').last().offset();
            		if($(window).scrollTop()>($offset.top)) {
            			$('.google_ads iframe').first().css({'position':'fixed','top':'0px','left':$offset.left+'px','margin-top':'10px','z-index':'999'});
            		}
            		else {
            			$('.google_ads iframe').first().css({'position':'relative','top':'','left':'','margin-top':'0','z-index':'0'});
            		}
				});
			});
		</script>
				<div class='comments'>
			<a name='comments'></a>
			<h2>
                <a href='#top' class="more">回页面顶部</a><a href='#commentForm' class="more" style="margin-right:10px;color:#080;">发表评论</a>
                网友评论<span>共<em class='reply_count'>7</em>条</span>
            </h2>
						<ul class='list'><li class='comment' id='cmt_361_158500_396'>
	<div class='user'><a href="http://my.oschina.net/u/158500" name="rpl_396"><img src="/img/portrait.gif" align="absmiddle" alt="红烧土豆" title="红烧土豆" class="SmallPortrait" user="158500"/></a></div>
	<div class='body'>
		<div class='time'><b>红烧土豆</b>发表于 2013-01-05 09:19</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>感谢楼主。</div>
		<div id='inline_reply_of_361_158500_396' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_361_155761_400'>
	<div class='user'><a href="http://my.oschina.net/tomlin" name="rpl_400"><img src="http://static.oschina.net/uploads/user/77/155761_50.jpg?t=1369134037000" align="absmiddle" alt="Tom-Lin" title="Tom-Lin" class="SmallPortrait" user="155761"/></a></div>
	<div class='body'>
		<div class='time'><b>Tom-Lin</b>发表于 2013-01-05 10:02</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>奇怪，还没翻译完，就到首页上去啦？</div>
		<div id='inline_reply_of_361_155761_400' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_361_82993_403'>
	<div class='user'><a href="http://my.oschina.net/jack230230" name="rpl_403"><img src="http://static.oschina.net/uploads/user/41/82993_50.jpg?t=1372838476000" align="absmiddle" alt="王振威" title="王振威" class="SmallPortrait" user="82993"/></a></div>
	<div class='body'>
		<div class='time'><b>王振威</b>来自 <a href="http://www.oschina.net/mobile" target="_blank">Android</a>发表于 2013-01-05 10:59</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>不错</div>
		<div id='inline_reply_of_361_82993_403' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_361_12_412'>
	<div class='user'><a href="http://my.oschina.net/javayou" name="rpl_412"><img src="http://static.oschina.net/uploads/user/0/12_50.jpg?t=1372173756000" align="absmiddle" alt="红薯" title="红薯" class="SmallPortrait" user="12"/></a></div>
	<div class='body'>
		<div class='time'><b>红薯</b>发表于 2013-01-05 14:12</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'><div class=ref><h4>引用来自“Tom Lin”的评论</h4><p>奇怪，还没翻译完，就到首页上去啦？</p></div>是啊，鼓噪大家一起来完成它！：）</div>
		<div id='inline_reply_of_361_12_412' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_361_993665_2284'>
	<div class='user'><a href="http://my.oschina.net/u/993665" name="rpl_2284"><img src="/img/portrait.gif" align="absmiddle" alt="Charlsi" title="Charlsi" class="SmallPortrait" user="993665"/></a></div>
	<div class='body'>
		<div class='time'><b>Charlsi</b>发表于 2013-02-27 15:08</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>不错，收藏一下。 </div>
		<div id='inline_reply_of_361_993665_2284' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_361_59015_3121'>
	<div class='user'><a href="http://my.oschina.net/u/59015" name="rpl_3121"><img src="/img/portrait.gif" align="absmiddle" alt="ChenRain" title="ChenRain" class="SmallPortrait" user="59015"/></a></div>
	<div class='body'>
		<div class='time'><b>ChenRain</b>发表于 2013-03-27 23:23</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>首先肯定下译者的辛苦工作，但不得不吐下槽。<br/>首先感觉不是rails使用者翻译的（频繁出现的“评估”，其实就是常见的eval啊），<br/><br/>This helps avoid subtle bugs with Date or Time objects that get evaluated once, instead of being dynamically evaluated.<br/>这应翻译为：这有助于避免使用Date或Time对象时只执行一次而不是动态执行这类的隐性问题。<br/><br/>另外，所有gem（以及所有rails里的关键词）都应该直接用原名，不要加中文翻译。<br/><br/></div>
		<div id='inline_reply_of_361_59015_3121' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li><li class='comment' id='cmt_361_133020_7104'>
	<div class='user'><a href="http://my.oschina.net/tiffanyue" name="rpl_7104"><img src="http://static.oschina.net/uploads/user/66/133020_50.jpg?t=1375319608000" align="absmiddle" alt="latpaw" title="latpaw" class="SmallPortrait" user="133020"/></a></div>
	<div class='body'>
		<div class='time'><b>latpaw</b>发表于 2013-07-22 14:51</div>
		<div class='opts'>
						</div>
		<div class='clear'></div>
		<div class='detail'>最近用rails4感觉很坑,看了这篇就了然了.</div>
		<div id='inline_reply_of_361_133020_7104' class='inline_reply'></div>
	</div>
	<div class='clear'></div>
</li></ul>
            				<div class='clear'></div>
			<div class='commentForm'>
				<div class='user'><a href="" name="commentForm"><img src="/img/portrait.gif" align="absmiddle" alt="非会员用户" title="非会员用户" class="SmallPortrait" user=""/></a></div>
    			<form id='form_comment' action='/action/translate/comment?' method='post'>
					<input type="hidden" value="361" name="article">
    				<textarea id='txt_comment' name='content' onkeydown="if((event.metaKey || event.ctrlKey)&&event.keyCode==13){$('#form_comment').submit();}" style='width:600px;height:100px;'></textarea><br/>
    				<input type='submit' value=' 发表评论 ' id='FormSubmitButton' class='SUBMIT rndbutton'/>
    				<span id="form_msg" style='display:none;'></span>
					<p style='margin-top:36px;'><a href='#comments'>回评论顶部</a>| <a href='#top'>回页面顶部</a></p>
    			</form>
			</div>
		</div>
        <div class="clear"></div>
	</div>
</div>
<div class='clear'></div>
<div id="inline_reply_editor" style="display:none;">
    <div class="CommentForm">
        <form id="form_inline_comment" method="POST" action="/action/translate/comment">
            <input id="inline_reply_id" type="hidden" value="" name="reply_id">
			<input type="hidden" value="361" name="article">
            <textarea id="txt_focus" onkeydown="if((event.metaKey || event.ctrlKey)&&event.keyCode==13){$('#form_inline_comment').submit();}" style="width:400px;height:80px;" name="content"></textarea>
            <br>
            <input class="SUBMIT" type="submit" value="回复">
            <input id="btn_close_inline_reply" class="SUBMIT" type="button" value="关闭">
            文明上网，理性发言
        </form>
    </div>
</div>
<script type="text/javascript" src="/js/syntax-highlighter-2.1.382/scripts/brush.js"></script>
<link type="text/css" rel="stylesheet" href="/js/syntax-highlighter-2.1.382/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="/js/syntax-highlighter-2.1.382/styles/shThemeDefault.css"/>
<script type='text/javascript'><!--
$(document).ready(function(){
	SyntaxHighlighter.config.clipboardSwf = '/js/syntax-highlighter-2.1.382/scripts/clipboard.swf';
	SyntaxHighlighter.all();
});
//-->
</script>
<script type="text/javascript" src="/action/visit/translate?id=361"></script>
<link type="text/css" rel="stylesheet" href="/js/syntax-highlighter-2.1.382/styles/shThemeDefault.css"/>
<script type='text/javascript'>
$(document).ready(function() {
	$('#form_comment').ajaxForm({
    	dataType: 'json',
		beforeSubmit: function(){
			$('#FormSubmitButton').attr('disabled','disabled');
			$('#form_msg').html("<span class='ajax_processing'>正在提交评论，请稍候...</span>");	
			$('#form_msg').show();	
		},
        success: function(json) {
			$('#FormSubmitButton').removeAttr('disabled');
			    		if(json.msg){
				$('#form_msg').html("<span class='error_msg'>"+json.msg+"</span>");
				$('#form_msg').show();
			}
    		else if(json.id){
    			ajax_get("/translate/show_comment?_cmt_id="+json.id, true, function(data){
    				$('.comments ul.list').append(data);
					$('#txt_comment').val('');
					$('.reply_count').html(json.reply_count);
    			});
				$('#form_msg').hide();
    		}
        }
    });
});
function delete_c(aid,uid,cid) {
	if(confirm("您确认要删除此评论？")){
        ajax_post("/action/translate/delete_comments",{cmt:cid},function(html){
			if(html.length>0)
				alert(html);
			else {
				$("#cmt_"+aid+"_"+uid+"_"+cid).fadeOut();
				$('.reply_count').html(parseInt($('.reply_count').html())-1);
			}
		});
	}
}
function reply_c(aid,uid,cid) {
	$('.inline_reply').empty();
	var div_id = '#inline_reply_of_'+aid+'_'+uid+'_'+cid;
	$('#inline_reply_id').val(uid+'_'+cid);
	$(div_id).html($('#inline_reply_editor').html());
	$('#txt_focus').focus();
	$('#btn_close_inline_reply').click(function(){
		$(div_id).empty();
	});
	$('#form_inline_comment').ajaxForm({
    	dataType: 'json',
    	success: function(json) {
        	if(json.msg){
        		alert(json.msg);
        	}
			else if(json.id){
				ajax_get("/translate/show_comment?_cmt_id="+json.id, true, function(data){
    				$('.comments ul.list').append(data);
					$('.reply_count').html(json.reply_count);
					$(div_id).empty();
    			});
			}
    	}
	});
}
function vote_article(id) {
		alert("必须登录后才能操作 :)");
	}
function vote_block(id) {
		alert("必须登录后才能操作 :)");
	}
function show_other(pid,ppid) {
	if($('#other_translate_'+pid+' .paragraph_chs').length==0) {
    	$('#other_translate_'+pid).show();
    	ajax_post("/translate/show_other_translate","pid="+pid+"&ppid="+ppid,function(html){
    		$('#other_translate_'+pid).hide().html(html);
			// 代码着色
			$('#other_translate_'+pid+' pre').each(function(){
				SyntaxHighlighter.highlight(null,this);
			});
			$('#other_translate_'+pid).slideDown();
    	});
    	}
	else {
		$('#other_translate_'+pid).slideToggle();
	}
	$('#btn_show_other_'+pid).toggleClass('closeOthers');
	$('#translate_'+pid).toggleClass('bd10');
}
function edit_tags(id) {
    popup("/translate/edit_tags?article="+id);
}
</script><div class='clear'></div></div>
	<div id="OSC_Footer" class='CenterDiv'><style>
.oscapp {text-align:left; width:220px;}
.oscapp span {float:left;width:140px;}
.oscapp a {float:left;text-indent:-9999em;width:16px;margin-left:8px;}
.oscapp a.android {background:url('/img/android.gif') no-repeat left center;}
.oscapp a.iphone {background:url('/img/iphone.gif') no-repeat left center;}
.oscapp a.wp7 {background:url('/img/wp7.gif') no-repeat left center;}
</style>
<table width='100%'><tr>
<td align='left'>&copy; 开源中国(OsChina.NET) | <a href="http://www.oschina.net/home/about">关于我们</a>| <a href="mailto:oschina.net@gmail.com">广告联系</a>| <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a>| <a href="http://m.oschina.net/">开源中国手机版</a>| <a href='http://www.miitbeian.gov.cn/' target='_blank' style='color:#737573;text-decoration:none;'>粤ICP备12009483号-3</a></td>
<td class='oscapp'>
	<span>开源中国手机客户端：</span>
	<a href="http://www.oschina.net/app" class='android' title='Android客户端'>Android</a>
	<a href="http://www.oschina.net/app" class='iphone' title='iPhone 客户端'>iPhone</a>
	<a href="http://www.oschina.net/app" class='wp7' title='Windows Phone 客户端'>WP7</a>
</td>
</tr>
</table>
<script type='text/javascript'>
<!--
if (top.location != self.location)top.location=self.location;
//-->
</script></div>
</div>
</body>
</html>
<!-- Generated by OsChina.NET (init:1[ms],page:46[ms],ip:14.153.255.150) -->